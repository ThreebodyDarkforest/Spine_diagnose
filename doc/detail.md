# 项目详细实现思路

## 题目分析

首先，再看一次题目。

- 数据量：

提供150份可下载的标注训练数据，以及50份可供下载的测试数据。

- 标注：

椎体和椎间盘的代表点会在T2矢状位的中间帧中标注出来，标注将从胸12（T12）腰1（L1）间的椎间盘开始到腰5（L5）骶1（S1）间的椎间盘结束，其中椎体的段位和椎间盘的段位将分别给出，如L1，L2，等。椎体将分成2类：正常和退行性病变，椎间盘分成5类：正常，膨出，突出，脱出，椎体内疝出。标注样例如图2. 病变编码对应表如下所示：

| 编码 | 中文 | 英文 |
| --- | --- | --- |
| **椎体** |  |  |
| V1 | 正常 | Normal |
| V2 | 退行性改变 | Degeneration |
| **椎间盘** |  |  |
| V1 | 正常 | Normal |
| V2 | 膨出 | Bulge |
| V3 | 突出 | Protruded |
| V4 | 脱出 | Extruded |
| V5 | 椎体内疝出 | Schmor |

- 明确任务
    - 一是检测和定位11块椎骨的标志点
    - 二是对椎骨的病变情况进行多分类

## 解决方案

- 对于检测和定位任务，本项目采用了[YOLOv6](https://github.com/meituan/YOLOv6)
    - 问题：YOLO需要物体检测框作为输入（即图片、检测框中心坐标和宽高、检测框内物体对应的类别），但是本题给定的数据集只有标志点
    - 解决：使用图像处理方法从标志点生成检测框（详见 `Spine_diagnose/tools/gen_yolo_data.py`）
- 对于病变情况多分类任务，本项目采用了Resnet50
    - 问题：没有现成数据集
    - 解决：自己通过YOLO格式的数据造，即把检测框内的内容切出来变成一张张图片并打标记